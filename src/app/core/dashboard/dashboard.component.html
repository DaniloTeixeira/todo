<ng-container *ngIf="todos">
  <form [formGroup]="form" *ngIf="form">
    <div class="dashboard-container">
      <h1 class="my-5 animate__animated animate__flipInX">Lista de tarefas</h1>

      <mat-card
        class="mb-1 mat-elevation-z6 create-card animate__animated animate__fadeInDownBig"
      >
        <mat-form-field class="w-100">
          <mat-label>Criar tarefa</mat-label>
          <input
            matInput
            #message
            maxlength="50"
            formControlName="description"
          />
          <mat-hint align="end">{{ message.value.length }} / 50</mat-hint>
          <mat-error
            class="mb-1"
            *ngIf="form.controls['description'].hasError('required')"
            >Insira uma tarefa para prosseguir</mat-error
          >
        </mat-form-field>
        <div class="d-flex justify-content-end">
          <button
            class="create-button mt-3"
            mat-mini-fab
            (click)="createTodo()"
            [disabled]="form.controls['description'].hasError('required')"
          >
            <mat-icon>add</mat-icon>
          </button>
        </div>
      </mat-card>

      <mat-card
        class="mat-elevation-z6 list-card animate__animated animate__fadeInDownBig"
      >
        <span *ngIf="!todos?.length">Nenhuma tarefa encontrada</span>
        <ng-container *ngFor="let todo of todos; index as i">
          <div class="d-flex justify-content-between align-items-center">
            <mat-checkbox
              type="text"
              class="me-4 py-3"
              formControlName="description"
              (click)="toggleDoneTask(todo)"
            >
              {{ todo.description }}
            </mat-checkbox>
            <button
              mat-mini-fab
              color="warn"
              type="button"
              (click)="onDeleteTodo(i)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </ng-container>
      </mat-card>
    </div>
  </form>
</ng-container>
