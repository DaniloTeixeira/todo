<form [formGroup]="form" *ngIf="form">
  <div class="dashboard-container">
    <h1 class="my-5 animate__animated animate__flipInX">Lista de tarefas</h1>

    <mat-card class="mb-1 mat-elevation-z6 create-card">
      <mat-form-field class="w-100">
        <mat-label>Criar tarefa</mat-label>
        <input matInput #message maxlength="50" formControlName="description" />
        <mat-hint align="start"
          ><strong>Quantidade de caracteres</strong>
        </mat-hint>
        <mat-hint align="end">{{ message.value.length }} / 50</mat-hint>
        <mat-error
          class="mb-1"
          *ngIf="form.controls['description'].hasError('required')"
          >Insira uma tarefa para prosseguir</mat-error
        >
      </mat-form-field>
      <div class="d-flex justify-content-end">
        <button
          class="mt-3"
          mat-mini-fab
          color="primary"
          (click)="createTodo()"
          [disabled]="form.invalid"
        >
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </mat-card>

    <mat-card
      class="mat-elevation-z6 list-card animate__animated animate__fadeInDownBig"
      *ngIf="todos?.length"
    >
      <span *ngIf="!todos?.length">Nenhuma tarefa encontrada</span>
      <ng-container *ngFor="let todo of todos; index as i">
        <div class="d-flex justify-content-between align-items-center">
          <mat-checkbox
            type="text"
            class="me-4 py-3"
            formControlName="description"
          >
            {{ todo.description }}
          </mat-checkbox>
          <button
            class="btn btn-sm btn-danger"
            mat-mini-fab
            color="warn"
            type="button"
            (click)="deleteTodo(i)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </ng-container>
    </mat-card>
  </div>
</form>
